#+TITLE: 사용법
#+AUTHOR: YeongCheon Kim

* 사용법

법정동 목록 API는 GCP의 Cloud Run 환경 위에서 동작합니다. 기본적으로 gRPC 서버와 ESPv2 기반 프록시 서버가 함께 동작합니다. API 주소는 [[https://grpc-proxy-server-mkvo6j4wsq-du.a.run.app][grpc-proxy-server-mkvo6j4wsq-du.a.run.app]] 입니다. 모든 동작은 [[https://github.com/kr-juso/protobuf][proto 프로젝트]]에 정의된 내용에 기반하여 동작합니다.

** 코드 체계 설명

법정동 목록 조회 API는 법정동코드를 기반으로 동작합니다.

법정동코드는 총 10자리로 구성되어 있으며 오른쪽부터 두자리씩 잘라 분류를 나누고 있습니다. 예를 들어 서울특별시의 코드는 ~1100000000~ 이며, 서울특별시에 속한 모든 구는 ~11??000000~ 형식을 띄고 있습니다. 이 API는 이러한 코드체계의 특성을 이용하여 [[https://ko.wikipedia.org/wiki/%EC%99%80%EC%9D%BC%EB%93%9C%EC%B9%B4%EB%93%9C_%EB%AC%B8%EC%9E%90][wildcard]] 구문을 지원하여 원하는 목록을 반환할 수 있습니다.


** HTTP 호출
*** 예제
**** 대한민국의 모든 특별/광역시, 도 반환

#+BEGIN_SRC
https://grpc-proxy-server-mkvo6j4wsq-du.a.run.app/v1/regcodes?regcode_pattern=*00000000
#+END_SRC

**** 서울특별시 소속의 모든 구, 동을 반환

#+BEGIN_SRC
https://grpc-proxy-server-mkvo6j4wsq-du.a.run.app/v1/regcodes?regcode_pattern=11*
#+END_SRC

**** 서울특별시 소속의 모든 구 반환

#+BEGIN_SRC
https://grpc-proxy-server-mkvo6j4wsq-du.a.run.app/v1/regcodes?regcode_pattern=11*000000
#+END_SRC

**** 서울특별시 종로구의 모든 동 반환

#+BEGIN_SRC
https://grpc-proxy-server-mkvo6j4wsq-du.a.run.app/v1/regcodes?regcode_pattern=111101*
#+END_SRC

** gRPC 호출
*** 사용법
proto파일을 구현한 client를 이용해 호출합니다.

대상 주소는 [[grpc-proxy-server-mkvo6j4wsq-du.a.run.app][grpc-proxy-server-mkvo6j4wsq-du.a.run.app]] 이며, 별도 인증은 필요하지 않습니다.
